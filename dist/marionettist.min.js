!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("underscore"),require("underscore-contrib"),require("underscore.string"),require("jquery"),require("backbone"),require("backbone.radio"),require("backbone-associations"),require("backbone.marionette"),require("i18next"),require("numeral"),require("moment"),require("moment-range"),require("moment-timezone")):"function"==typeof define&&define.amd?define(["underscore","underscore-contrib","underscore.string","jquery","backbone","backbone.radio","backbone-associations","backbone.marionette","i18next","numeral","moment","moment-range","moment-timezone"],e):t.Marionettist=e(t._,t.underscoreContrib,t.s,t.$,t.Backbone,t.Backbone.Radio,t.backboneAssociations,t.Marionette$1,t.i18next,t.numeral,t.moment,t.momentRange,t.momentTimezone)}(this,function(t,e,r,n,o,i,s,u,p,c,l,a,f){"use strict";t="default"in t?t["default"]:t,r="default"in r?r["default"]:r,n="default"in n?n["default"]:n,o="default"in o?o["default"]:o,u="default"in u?u["default"]:u,p="default"in p?p["default"]:p,c="default"in c?c["default"]:c,l="default"in l?l["default"]:l;var h;h=u.extend(),h.Backbone=o,h.Marionette=u,h._=t,h.$=n,h.s=r,h.I18n=p,h.numeral=c,h.moment=l;var y,_=h,d=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;y=function(t){function e(){this.stage="development"}return d(e,t),e.prototype.isDevelopment=function(){return"development"===this.stage},e.prototype.isProduction=function(){return"production"===this.stage},e.prototype.getLocale=function(){return _.I18n.language},e.prototype.setStage=function(t){var e;return e=this.stage,this.stage=t,this.triggerMethod("change:stage",e,t)},e.prototype.getStage=function(){return this.stage},e.prototype.setLocale=function(t,e){var r;return null==t&&(t="en"),null==e&&(e=null),r=this.getLocale(),_.I18n.changeLanguage(t,function(n){return _.channels.publish("marionettist","change:locale",{currentLocale:t,oldLocale:r}),_._.isFunction(e)?e(n):void 0})},e}(_.Object);var w,v=y,m=function(t,e){function r(){this.constructor=t}for(var n in e)b.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},b={}.hasOwnProperty;w=function(t){function e(){}return m(e,t),e.prototype.request=function(t,e,r){return null==t&&(t="global"),null==e&&(e=""),null==r&&(r={}),_.Backbone.Radio.channel(t).request(e,r)},e.prototype.replyOnce=function(t,e,r){var n;return null==t&&(t="global"),null==e&&(e=""),n=_.Backbone.Radio.channel(t),_._.isFunction(r)?n.replyOnce(e,r):n.replyOnce(r)},e.prototype.reply=function(t,e,r){var n;return null==t&&(t="global"),null==e&&(e=""),n=_.Backbone.Radio.channel(t),_._.isFunction(r)?n.reply(e,r):n.reply(r)},e.prototype.publish=function(t,e,r){return null==t&&(t="global"),null==e&&(e=""),null==r&&(r={}),_.Backbone.Radio.channel(t).trigger(e,r)},e.prototype.subscribe=function(t,e,r){return null==t&&(t="global"),null==e&&(e=""),_.Backbone.Radio.channel(t).on(e,r)},e}(_.Object);var A,O=w,C=function(t,e){function r(){this.constructor=t}for(var n in e)k.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},k={}.hasOwnProperty;A=function(t){function e(){}return C(e,t),e.prototype.refreshRoute=function(t){return null==t&&(t=this.getCurrentRoute()),_.Backbone.history.loadUrl(t)},e.prototype.navigateTo=function(t,e){return null==e&&(e={}),_.Backbone.history.navigate(t,e)},e.prototype.getCurrentRoute=function(){var t;return t=_.Backbone.history.fragment,_._.isEmpty(t)?null:t},e.prototype.startHistory=function(t){return null==t&&(t={}),null!=_.Backbone.history?_.Backbone.history.start(t):void 0},e}(_.Object);var R,M=A;R=function(){function t(){}return t.prototype.debug=!1,t.prototype.lookupPaths=[],t.prototype.engine=function(){var t;return t={},"undefined"!=typeof HAML&&null!==HAML&&(t=HAML),"undefined"!=typeof JST&&null!==JST&&(t=JST),t},t.prototype.render=function(t,e,r){var n,o;return null==t&&(t=""),null==e&&(e={}),null==r&&(r={}),o="",n=this.engine,_._.isFunction(t)&&(n=n()),null!=r.defaultTemplate&&(o=r.defaultTemplate),null!=n&&_._.isFunction(n[t])&&(o=n[t](e)),o},t}();var F,P=R,x=function(t,e){function r(){this.constructor=t}for(var n in e)j.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},j={}.hasOwnProperty;F=function(t){function e(){this.templates=new P}return x(e,t),e}(_.Object);var V,B=F;V={render:function(t,e){var r;if(Marionettist._.isFunction(t))return t(e);if(t!==!1){if(r=this.getTemplate(t),!Marionettist._.isFunction(r))throw"Template "+t+" was not found!";return r(e)}},getTemplate:function(t){var e,r,n,o,i,s,u,p,c;if(u=Marionettist.config.templates.lookupPaths,Marionettist._.isFunction(u)&&(u=u()),!Marionettist._.isArray(u))throw"lookupPaths most be an array";for(c=[t],0===u.length&&(u=[""]),e=0,n=u.length;n>e;e++)for(i=u[e],r=0,o=c.length;o>r;r++)if(p=c[r],s=this.findLookupPath(i+p,t),null!=s)return s},findLookupPath:function(t,e){var r,n;return r=Marionettist.config.templates.engine,Marionettist._.isFunction(r)&&(r=r()),n=r[t],Marionettist.config.templates.debug===!0&&Marionettist.logger.info("Looking template: "+e+" in '"+t+"'"),n?n:void 0},withTemplate:function(t){var e;return null!=t?(e=t.split("/"),e.splice(-1,0,"templates"),e.join("/")):void 0}};var q,L=V,T=function(t,e){function r(){this.constructor=t}for(var n in e)E.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},E={}.hasOwnProperty;q=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return T(e,t),e.prototype.pathFor=function(t){var e;return e="",e="#"+t},e.prototype.waitFor=function(t,e){var r,n;return null==e&&(e={}),n=[],n=_._.chain([t]).flatten().value(),(r=_.$).when.apply(r,n).then(function(){return _._.isFunction(e.success)?e.success():void 0},function(t){return _._.isFunction(e.error)?e.error():void 0})},e}(_.Object);var D,I=q,z=function(t,e){function r(){this.constructor=t}for(var n in e)H.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},H={}.hasOwnProperty;D=function(t){function e(){}return z(e,t),e.prototype.success=function(t,e){return null==e&&(e={}),e.type="success",this.log(t,e)},e.prototype.warn=function(t,e){return null==e&&(e={}),e.type="warn",this.log(t,e)},e.prototype.error=function(t,e){return null==e&&(e={}),e.type="error",this.log(t,e)},e.prototype.info=function(t,e){return null==e&&(e={}),e.type="info",this.log(t,e)},e.prototype.log=function(t,e){var r,n,o;if(null==e&&(e={}),n=e.force,o=e.type,_.env.isDevelopment()||n===!0){switch(o=o||"black",r="White",o){case"success":o="Green",r="LimeGreen";break;case"info":o="DodgerBlue",r="Turquoise";break;case"error":o="Red",r="Black";break;case"start":o="OliveDrab",r="PaleGreen";break;case"warning":o="Tomato",r="Black";break;case"end":o="Orchid",r="MediumVioletRed";break;default:o=o}r="White","object"==typeof t?console.log(t):console.log("%c"+t,"type:"+o+";font-weight:bold; background-type: "+r+";")}},e}(_.Object);var S,W=D,N=function(t,e){function r(){this.constructor=t}for(var n in e)$.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},$={}.hasOwnProperty;S=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return N(e,t),e.prototype.router=function(){return this.getOption("router")},e.prototype.path=function(){return this.getOption("path")},e.prototype.actionName=function(){return this.getOption("actionName")},e.prototype.controller=function(){return this.getOption("controller")},e}(_.Object);var Y,G=S,J=function(t,e){function r(){this.constructor=t}for(var n in e)U.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},U={}.hasOwnProperty;Y=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return J(e,t),e.prototype.onRoute=function(t,e,r){return null!=this.controller&&_._.isFunction(this.controller.onRoute)?this.controller.onRoute(this,t,e,r):void 0},e.prototype._setControllerFilters=function(t){var e,r;return null!=t&&(e={before:{},after:{}},r=t.filters,_._.isFunction(r)&&(r=r()),null==t.filters&&(t.filters={}),t.filters=_._.extend(e,r)),t},e.prototype._addAppRoute=function(t,e,r){var n,o;if(this.controller=this._setControllerFilters(t),n=t[r],o=function(t){return function(n){var o;return t.controller.route=new _.AppRoute({controller:t.controller,actionName:r,path:e}),o=t._executeFilter(t.controller.filters.before,t.controller),o!==!1?(t.controller[r].apply(t.controller,t._getParams()),t._executeFilter(t.controller.filters.after,t.controller)):void 0}}(this),!o)throw new _.Marionette.Error('Method "'+r+'" was not found on the controller');return this.route(e,r,_._.bind(o,t))},e.prototype._executeFilter=function(t,e){var r,n,o,i,s,u,p;for(u=!0,s=_._.keys(t),n=0,o=s.length;o>n;n++)switch(i=s[n],r=t[i],p="Action halted by filter '"+i+"'",!1){case!_._.isFunction(r):if(u=r(e),u===!1){"undefined"!=typeof console&&null!==console&&console.warn(p);break}break;case!_._.isObject(r):if(u=this._proccessFilterObject(i,r,e),u===!1){"undefined"!=typeof console&&null!==console&&console.warn(p);break}}return u},e.prototype._getParams=function(){var t,e;return e=this._routeToRegExp(this.controller.route.getOption("path")),t=this._extractParameters(e,_.Backbone.history.getFragment())},e.prototype._proccessFilterObject=function(t,e,r){var n,o,i,s;if(i={method:null,only:[],except:[]},s=_._.extend(i,e),o=r[t],n=r.route.actionName(),!_._.isArray(s.only))throw"filter option only, most be an array";if(!_._.isArray(s.except))throw"filter option except, most be an array";if(s.only.length>0||s.except.length>0){if(_._.contains(s.only,n)&&!_._.contains(s.except,n)&&_._.isFunction(o))return o.apply(this.controller,this._getParams())}else if(_._.isFunction(o))return o.apply(this.controller,this._getParams())},e}(_.AppRouter);var K,Q,X=Y,Z=function(t,e){function r(){this.constructor=t}for(var n in e)tt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},tt={}.hasOwnProperty;Q=u.Region.prototype.show,K=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Z(e,t),e.prototype.show=function(t,e){var r,n,o,i,s,u;if(e=e||{},o=e.preventDestroy===!0,s=e.transitionOut,delete e.transitionOut,r=[t,e],s===!1)return Q.apply(this,r);if(n=this.currentView,i=function(t){return function(){return Q.apply(t,r)}}(this),null!=n&&_._.isFunction(n.transitionOut)){if(n.triggerMethod("before:transition:out"),u=n.transitionOut(),null!=(null!=u?u.then:void 0))return u.then(function(t){return function(){return i()}}(this));throw"transitionOut method most return a promise"}return i()},e}(u.Region);var et,rt=K,nt=function(t,e){function r(){this.constructor=t}for(var n in e)ot.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},ot={}.hasOwnProperty,it=[].slice;et=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return nt(e,t),e.prototype.templateHelpers={pathFor:function(){var t,e;return t=1<=arguments.length?it.call(arguments,0):[],(e=_.utils).pathFor.apply(e,t)},_:_._,s:_.s,t:function(){var t,e;return t=1<=arguments.length?it.call(arguments,0):[],(e=_.I18n).t.apply(e,t)},formatCurrency:function(t,e){return null==e&&(e="$0,0.00"),_.numeral(t).format(e)},formatNumber:function(t,e){return null==e&&(e="0,0.00"),_.numeral(t).format(e)},formatPercentage:function(t,e){return null==e&&(e="0.00%"),_.numeral(t).format(e)},formatDate:function(t,e){return null==e&&(e="DD-MM-YYYY"),_.moment(t).format(e)}},e}(_.Object);var st,ut=et,pt=function(t,e){function r(){this.constructor=t}for(var n in e)ct.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},ct={}.hasOwnProperty;st=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return pt(e,t),e}(u.CollectionView);var lt,at=st,ft=function(t,e){function r(){this.constructor=t}for(var n in e)ht.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},ht={}.hasOwnProperty;lt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ft(e,t),e}(u.CompositeView);var yt,_t=lt,dt=function(t,e){function r(){this.constructor=t}for(var n in e)gt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},gt={}.hasOwnProperty;yt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return dt(e,t),e}(u.ItemView);var wt,vt=yt,mt=function(t,e){function r(){this.constructor=t}for(var n in e)bt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},bt={}.hasOwnProperty;wt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mt(e,t),e}(u.LayoutView);var At,Ot=wt,Ct=function(t,e){function r(){this.constructor=t}for(var n in e)kt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},kt={}.hasOwnProperty;At=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ct(e,t),e}(o.Model);var Rt,Mt=At,Ft=function(t,e){function r(){this.constructor=t}for(var n in e)Pt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},Pt={}.hasOwnProperty;Rt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ft(e,t),e}(o.Collection);var xt,jt=Rt,Vt=function(t,e){function r(){this.constructor=t}for(var n in e)Bt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},Bt={}.hasOwnProperty,qt=[].slice;xt=function(t){function e(t){null==t&&(t={}),e.__super__.constructor.call(this,t),this._instance_id=_._.uniqueId("responder"),this.register(this,this._instance_id)}return Vt(e,t),e.prototype.loaderView=Ot.extend({template:function(t){return _.config.templates.render("marionettist/loader",t,{defaultTemplate:"<div class='mri-loader'>\n  <div class='mri-loader__content'>\n    <i class=\"fa fa-spinner fa-spin fa-2x fa-fw\"></i>\n    <span class=\"sr-only\">Loading...</span>\n  </div>\n</div>"})}}),e.prototype.getLoaderView=function(){return null==this.get("loaderView")&&this.set({loaderView:new this.loaderView}),this.get("loaderView")},e.prototype.close=function(){var t;return t=1<=arguments.length?qt.call(arguments,0):[],e.__super__.close.call(this,t),this.unregister(this,this._instance_id)},e.prototype.show=function(t,e){var r,n;return null==e&&(e={}),n=null!=e.region?e.region:this.get("region"),this.listenTo(t,"close",this.close),null!=e.async?(e.loaderView!==!1&&(r=this.getLoaderView(),this.listenTo(r,"close",this.close),n.show(r)),this.fetch().then(function(o){return function(){return e.loaderView!==!1&&n.currentView!==r?t.close():n.show(t)}}(this))):n.show(t)},e.prototype.defaults={params:{},async:[]},e.prototype.waitFor=function(){var t,e;return t=1<=arguments.length?qt.call(arguments,0):[],(e=_.utils).waitFor.apply(e,t)},e.prototype.deferred=function(){return _.$.Deferred()},e.prototype.fetch=function(t){var e,r;return null==t&&(t={}),r=this.deferred(),e=_._.chain([this.get("async")]).flatten().compact().value(),this.waitFor(e,{success:function(){return _._.isFunction(t.success)&&t.success(),r.resolve()},error:function(){return _._.isFunction(t.error)&&t.error(),r.reject()}}),r.promise()},e.prototype.save=function(){return this.deferred().promise()},e.prototype.destroy=function(){return this.deferred().promise()},e.prototype.register=function(t,e){return null==this._registry&&(this._registry={}),this._registry[e]=t},e.prototype.unregister=function(t,e){return delete this._registry[e]},e.prototype.resetRegistry=function(){var t,e,r,n,o;r=this.getRegistrySize(),n=this._registry;for(t in n)o=n[t],o.region.close();return e="There were "+r+" responders in the registry, there are now "+this.getRegistrySize(),this.getRegistrySize()>0?console.warn(e,this._registry):console.log(e)},e.prototype.getRegistrySize=function(){return _._.size(this._registry)},e}(Mt);var Lt,Tt=xt,Et=function(t,e){function r(){this.constructor=t}for(var n in e)Dt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},Dt={}.hasOwnProperty;Lt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Et(e,t),e.prototype.responders=function(){return{base:Tt}},e.prototype.models=function(){return{base:Mt}},e.prototype.collections=function(){return{base:jt}},e.prototype.views=function(){return{}},e.prototype.getResponder=function(t,e){return null==e&&(e={}),this.getResource("responders",t,e)},e.prototype.getView=function(t,e){return null==e&&(e={}),this.getResource("views",t,e)},e.prototype.getModel=function(t,e){return null==e&&(e={}),this.getResource("models",t,e)},e.prototype.getCollection=function(t,e,r){return null==e&&(e=[]),null==r&&(r={}),this.getResource("collections",t,r,e)},e.prototype.getResource=function(t,e,r,n){var o,i;return null==r&&(r={}),o=null,i=this[t],_._.isFunction(i)&&(i=i()),null==r.viewModel&&(r.viewModel=this),_._.isObject(i)&&null!=i[e]&&(o=null!=n?new i[e](n,r):new i[e](r)),o},e}(o.Model);var It,zt=Lt,Ht=function(t,e){function r(){this.constructor=t}for(var n in e)St.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},St={}.hasOwnProperty;It=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ht(e,t),e.prototype.navigateTo=function(t,e){return null==e&&(e={}),_.location.navigateTo(t,e)},e.prototype.getCurrentRoute=function(){return _.location.getCurrentRoute()},e}(_.Object);var Wt,Nt=It,$t=function(t,e){function r(){this.constructor=t}for(var n in e)Yt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},Yt={}.hasOwnProperty;Wt=function(t){function e(t){e.__super__.constructor.call(this,t),this._initChildApps(t),_._.result(this,"startAfterInitialized")&&this.start(t)}return $t(e,t),e.prototype.Controllers=new _.Object,e.prototype.Entities=new _.Object,e.prototype.Views=new _.Object,e.prototype._isRunning=!1,e.prototype._isDestroyed=!1,e.prototype.preventDestroy=!1,e.prototype.startAfterInitialized=!1,e.prototype.startWithParent=!1,e.prototype.stopWithParent=!0,e.prototype.resources=[],e.prototype.startHistory=function(t){return null==t&&(t={}),_.Backbone.History.started?void 0:_.location.startHistory(t)},e.prototype.start=function(t){return this.triggerMethod("before:resources:fetch",t),_.utils.waitFor(this.resources,{success:function(r){return function(){return e.__super__.start.call(r,t),r.triggerMethod("resources:fetch:success")}}(this),error:function(t){return function(){return t.triggerMethod("resources:fetch:error")}}(this)})},e.prototype.isRunning=function(){return this._isRunning},e.prototype.stop=function(t){return this._isRunning?(this.triggerMethod("before:stop",t),this._isRunning=!1,this.triggerMethod("stop",t),this):this},e.prototype._initChildApps=function(){var t,e;e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],this._childApps={},this.mergeOptions(e,["childApps","childAppOptions"]),t=this.childApps,t&&(_._.isFunction(t)&&(t=t.call(this,e)),this.addChildApps(t)),this._initListeners()},e.prototype._initListeners=function(){this.on({start:this._startChildApps,"before:stop":this._stopChildApps,"before:destroy":this._destroyChildApps})},e.prototype._startChildApps=function(t){return _._.each(this._childApps,function(e){return _._.result(e,"startWithParent")?e.start(t):void 0})},e.prototype._stopChildApps=function(t){return _._.each(this._childApps,function(e){return _._.result(e,"stopWithParent")?e.stop(t):void 0})},e.prototype._destroyChildApps=function(t){return _._.each(this._childApps,function(e){return _._.result(e,"preventDestroy")?void 0:e.destroy(t)})},e.prototype._buildAppFromObject=function(t){var e,r;return e=t.AppClass,r=_._.omit(t,"AppClass"),this.buildApp(e,r)},e.prototype._buildApp=function(t,e){return _._.isFunction(t)?this.buildApp(t,e):_._.isObject(t)?this._buildAppFromObject(t):void 0},e.prototype.buildApp=function(t,e){return e=_._.extend({},this.childAppOptions,e),new t(e)},e.prototype._ensureAppIsUnique=function(t){if(this._childApps[t])throw new Marionette.Error({name:"DuplicateChildAppError",message:'A child App with name "'+t+'" has already been added.'})},e.prototype.addChildApps=function(t){return _._.each(t,function(t,e){this.addChildApp(e,t)},this)},e.prototype.addChildApp=function(t,e,r){var n;if(this._ensureAppIsUnique(t),n=this._buildApp(e,r),!n)throw new Marionette.Error({name:"AddChildAppError",message:"App build failed.  Incorrect configuration."});return n._name=t,this._childApps[t]=n,n.on("destroy",_._.partial(this._removeChildApp,t),this),this.isRunning()&&_._.result(n,"startWithParent")&&n.start(),n},e.prototype.getName=function(){return this._name},e.prototype.getChildApps=function(){return _._.clone(this._childApps)},e.prototype.getChildApp=function(t){return this._childApps[t]},e.prototype._removeChildApp=function(t){delete this._childApps[t]._name,delete this._childApps[t]},e.prototype.removeChildApps=function(){var t;return t=this.getChildApps(),_._.each(this._childApps,function(t,e){this.removeChildApp(e)},this),t},e.prototype.removeChildApp=function(t,e){var r;return e=_._.extend({},e),(r=this.getChildApp(t))?(e.preventDestroy||_._.result(r,"preventDestroy")?this._removeChildApp(t):r.destroy(),r):void 0},e.prototype.destroy=function(){},e}(_.Application);var Gt=Wt,Jt=function(t,e){function r(){this.constructor=t}for(var n in e)Ut.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},Ut={}.hasOwnProperty;return _.channels=new O,_.location=new M,_.env=new v,_.config=new B,_.logger=new W,_._.extend(_.Renderer,L),_.utils=new I,_.AppRoute=G,_.AppRouter=X,_._.extend(_.Region.prototype,rt.prototype),_.Views=new ut,_._.extend(_.View.prototype,{templateHelpers:function(){var t;return t=_.Views.templateHelpers,null!=this.viewContext?(t.viewContext=this.viewContext,_._.isFunction(this.viewContext)&&(t.viewContext=this.viewContext())):t.viewContext={},t}}),_.Views.Collection=at,_.Views.Composite=_t,_.Views.Item=vt,_.Views.Layout=Ot,_.Entities=new _.Object,_.Entities.Models=new _.Object,_.Entities.Collections=new _.Object,_.Entities.ViewModels=new _.Object,_.Entities.Responders=new _.Object,_.Entities.Models.Base=Mt,_.Backbone.AssociatedModel&&(_.Entities.Models.Associated=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Jt(e,t),e}(_.Backbone.AssociatedModel)),_.Entities.Collections.Base=jt,_.Entities.Responders.Base=Tt,_.Entities.ViewModels.Base=zt,_.Controllers=new _.Object,_.Controllers.Base=Nt,_.Application=Gt,"undefined"!=typeof global&&null!==global&&(global.Marionettist=_),_});