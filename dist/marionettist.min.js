!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("underscore"),require("underscore.string"),require("jquery"),require("backbone"),require("backbone.radio"),require("backbone-associations"),require("backbone.marionette"),require("i18next"),require("numeral"),require("moment"),require("moment-range"),require("moment-timezone")):"function"==typeof define&&define.amd?define(["underscore","underscore.string","jquery","backbone","backbone.radio","backbone-associations","backbone.marionette","i18next","numeral","moment","moment-range","moment-timezone"],e):t.Marionettist=e(t._,t.s,t.$,t.Backbone,t.Backbone.Radio,t.Backbone,t.Marionette,t.i18next,t.numeral,t.moment,t.moment,t.moment)}(this,function(t,e,r,n,o,i,s,u,p,l,c,a){"use strict";t="default"in t?t.default:t,e="default"in e?e.default:e,r="default"in r?r.default:r,n="default"in n?n.default:n,o="default"in o?o.default:o,i="default"in i?i.default:i,s="default"in s?s.default:s,u="default"in u?u.default:u,p="default"in p?p.default:p,l="default"in l?l.default:l,c="default"in c?c.default:c,a="default"in a?a.default:a;var f;f=s.extend(),f.Backbone=n,f.Backbone.Radio=o,f.Marionette=s,f._=t,f.$=r,f.s=e,f.I18n=u,f.numeral=p,f.moment=l;var h,y=f,_=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;h=function(t){function e(){this.stage="development"}return _(e,t),e.prototype.isDevelopment=function(){return"development"===this.stage},e.prototype.isProduction=function(){return"production"===this.stage},e.prototype.getLocale=function(){return y.I18n.language},e.prototype.setStage=function(t){var e;return e=this.stage,this.stage=t,this.triggerMethod("change:stage",e,t)},e.prototype.getStage=function(){return this.stage},e.prototype.setLocale=function(t,e){var r;return null==t&&(t="en"),null==e&&(e=null),r=this.getLocale(),y.I18n.changeLanguage(t,function(n){if(y.channels.publish("marionettist","change:locale",{currentLocale:t,oldLocale:r}),y._.isFunction(e))return e(n)})},e}(y.Object);var g,w=h,b=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;g=function(t){function e(){}return b(e,t),e.prototype.request=function(t,e,r){return null==t&&(t="global"),null==e&&(e=""),null==r&&(r={}),y.Backbone.Radio.channel(t).request(e,r)},e.prototype.replyOnce=function(t,e,r){var n;return null==t&&(t="global"),null==e&&(e=""),n=y.Backbone.Radio.channel(t),y._.isFunction(r)?n.replyOnce(e,r):n.replyOnce(r)},e.prototype.reply=function(t,e,r){var n;return null==t&&(t="global"),null==e&&(e=""),n=y.Backbone.Radio.channel(t),y._.isFunction(r)?n.reply(e,r):n.reply(r)},e.prototype.publish=function(t,e,r){return null==t&&(t="global"),null==e&&(e=""),null==r&&(r={}),y.Backbone.Radio.channel(t).trigger(e,r)},e.prototype.subscribe=function(t,e,r){return null==t&&(t="global"),null==e&&(e=""),y.Backbone.Radio.channel(t).on(e,r)},e}(y.Object);var v,A=g,O=function(t,e){function r(){this.constructor=t}for(var n in e)F.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},F={}.hasOwnProperty;v=function(t){function e(){}return O(e,t),e.prototype.refreshRoute=function(t){return null==t&&(t=this.getCurrentRoute()),y.Backbone.history.loadUrl(t)},e.prototype.navigateTo=function(t,e){return null==e&&(e={}),y.Backbone.history.navigate(t,e)},e.prototype.getCurrentRoute=function(){var t;return t=y.Backbone.history.fragment,y._.isEmpty(t)?null:t},e.prototype.startHistory=function(t){if(null==t&&(t={}),null!=y.Backbone.history)return y.Backbone.history.start(t)},e}(y.Object);var k,M=v;k=function(){function t(){}return t.prototype.debug=!1,t.prototype.lookupPaths=[],t.prototype.engine=function(){var t;return t={},"undefined"!=typeof HAML&&null!==HAML&&(t=HAML),"undefined"!=typeof JST&&null!==JST&&(t=JST),t},t.prototype.render=function(t,e,r){var n,o;return null==t&&(t=""),null==e&&(e={}),null==r&&(r={}),o="",n=this.engine,y._.isFunction(t)&&(n=n()),null!=r.defaultTemplate&&(o=r.defaultTemplate),null!=n&&y._.isFunction(n[t])&&(o=n[t](e)),o},t}();var R,C=k,j=function(t,e){function r(){this.constructor=t}for(var n in e)P.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},P={}.hasOwnProperty;R=function(t){function e(){this.templates=new C}return j(e,t),e}(y.Object);var B,x=R;B={render:function(t,e){var r;if(Marionettist._.isFunction(t))return t(e);if(!1!==t){if(r=this.getTemplate(t),!Marionettist._.isFunction(r))throw"Template "+t+" was not found!";return r(e)}},getTemplate:function(t){var e,r,n,o,i,s,u,p,l;if(u=Marionettist.config.templates.lookupPaths,Marionettist._.isFunction(u)&&(u=u()),!Marionettist._.isArray(u))throw"lookupPaths most be an array";for(l=[t],0===u.length&&(u=[""]),e=0,n=u.length;e<n;e++)for(i=u[e],r=0,o=l.length;r<o;r++)if(p=l[r],null!=(s=this.findLookupPath(i+p,t)))return s},findLookupPath:function(t,e){var r,n;if(r=Marionettist.config.templates.engine,Marionettist._.isFunction(r)&&(r=r()),n=r[t],!0===Marionettist.config.templates.debug&&Marionettist.logger.info("Looking template: "+e+" in '"+t+"'"),n)return n},withTemplate:function(t){var e;if(null!=t)return e=t.split("/"),e.splice(-1,0,"templates"),e.join("/")}};var V,q=B,T=function(t,e){function r(){this.constructor=t}for(var n in e)E.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},E={}.hasOwnProperty,L=[].slice;V=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return T(e,t),e.prototype.getValue=function(t,e,r){return y._.isFunction(t)&&(t=r?t.apply(e,r):t.call(e)),t},e.prototype.pathFor=function(t){return"","#"+t},e.prototype.waitFor=function(t,e){switch(null==e&&(e={}),!1){case"bluebird"!==e.promiseType:return this._waitForBluebird(t,e);default:return this._waitForAjax(t,e)}},e.prototype._waitForAjax=function(t,e){var r,n;return null==t&&(t=[]),null==e&&(e={}),n=[],n=y._.chain([t]).flatten().value(),n.length>0?(r=y.$).when.apply(r,n).then(function(){var t;if(t=1<=arguments.length?L.call(arguments,0):[],y._.isFunction(e.success))return e.success.apply(e,t)},function(){var t;if(t=1<=arguments.length?L.call(arguments,0):[],y._.isFunction(e.error))return e.error.apply(e,t)}):y._.isFunction(e.success)?e.success(null):void 0},e.prototype._waitForBluebird=function(t,e){return null==e&&(e={}),t=y._.chain([t]).flatten().value(),t.length>0?Promise.all(t.map(function(t){return t.reflect()})).then(function(t){var r,n,o,i,s;for(s=[],r=[],n=0,i=t.length;n<i;n++)o=t[n],o.isFulfilled()?s.push(o.value()):r.push(o.reason());if(r.length>0){if(y._.isFunction(e.error))return e.error.apply(e,r)}else if(y._.isFunction(e.success))return e.success.apply(e,s)}):y._.isFunction(e.success)?e.success(null):void 0},e}(y.Object);var D,I=V,z=function(t,e){function r(){this.constructor=t}for(var n in e)H.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},H={}.hasOwnProperty;D=function(t){function e(){}return z(e,t),e.prototype.success=function(t,e){return null==e&&(e={}),e.type="success",this.log(t,e)},e.prototype.warn=function(t,e){return null==e&&(e={}),e.type="warn",this.log(t,e)},e.prototype.error=function(t,e){return null==e&&(e={}),e.type="error",this.log(t,e)},e.prototype.info=function(t,e){return null==e&&(e={}),e.type="info",this.log(t,e)},e.prototype.log=function(t,e){var r,n,o;if(null==e&&(e={}),n=e.force,o=e.type,y.env.isDevelopment()||!0===n){switch(o=o||"black",r="White",o){case"success":o="Green",r="LimeGreen";break;case"info":o="DodgerBlue",r="Turquoise";break;case"error":o="Red",r="Black";break;case"start":o="OliveDrab",r="PaleGreen";break;case"warning":o="Tomato",r="Black";break;case"end":o="Orchid",r="MediumVioletRed";break;default:o=o}r="White","object"==typeof t?console.log(t):console.log("%c"+t,"type:"+o+";font-weight:bold; background-type: "+r+";")}},e}(y.Object);var S,W=D,N=function(t,e){function r(){this.constructor=t}for(var n in e)$.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},$={}.hasOwnProperty;S=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return N(e,t),e.prototype.router=function(){return this.getOption("router")},e.prototype.path=function(){return this.getOption("path")},e.prototype.actionName=function(){return this.getOption("actionName")},e.prototype.controller=function(){return this.getOption("controller")},e}(y.Object);var Y,G=S,J=function(t,e){function r(){this.constructor=t}for(var n in e)U.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},U={}.hasOwnProperty;Y=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return J(e,t),e.prototype.onRoute=function(t,e,r){if(null!=this.controller&&y._.isFunction(this.controller.onRoute))return this.controller.onRoute(this,t,e,r)},e.prototype._setControllerFilters=function(t){var e,r;return null!=t&&(e={before:{},after:{}},r=t.filters,y._.isFunction(r)&&(r=r()),null==t.filters&&(t.filters={}),t.filters=y._.extend(e,r)),t},e.prototype._addAppRoute=function(t,e,r){var n;if(this.controller=this._setControllerFilters(t),t[r],!(n=function(t){return function(n){if(t.controller.route=new y.AppRoute({controller:t.controller,actionName:r,path:e}),!1!==t._executeFilter(t.controller.filters.before,t.controller))return t.controller[r].apply(t.controller,t._getParams()),t._executeFilter(t.controller.filters.after,t.controller)}}(this)))throw new y.Marionette.Error('Method "'+r+'" was not found on the controller');return this.route(e,r,y._.bind(n,t))},e.prototype._executeFilter=function(t,e){var r,n,o,i,s,u,p;for(u=!0,s=y._.keys(t),n=0,o=s.length;n<o;n++)switch(i=s[n],r=t[i],p="Action halted by filter '"+i+"'",!1){case!y._.isFunction(r):if(!1===(u=r(e))){"undefined"!=typeof console&&null!==console&&console.warn(p);break}break;case!y._.isObject(r):if(!1===(u=this._proccessFilterObject(i,r,e))){"undefined"!=typeof console&&null!==console&&console.warn(p);break}}return u},e.prototype._getParams=function(){var t;return t=this._routeToRegExp(this.controller.route.getOption("path")),this._extractParameters(t,y.Backbone.history.getFragment())},e.prototype._proccessFilterObject=function(t,e,r){var n,o,i,s;if(i={method:null,only:[],except:[]},s=y._.extend(i,e),o=r[t],n=r.route.actionName(),!y._.isArray(s.only))throw"filter option only, most be an array";if(!y._.isArray(s.except))throw"filter option except, most be an array";if(s.only.length>0||s.except.length>0){if(y._.contains(s.only,n)&&!y._.contains(s.except,n)&&y._.isFunction(o))return o.apply(this.controller,this._getParams())}else if(y._.isFunction(o))return o.apply(this.controller,this._getParams())},e}(y.AppRouter);var K,Q,X=Y,Z=function(t,e){function r(){this.constructor=t}for(var n in e)tt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},tt={}.hasOwnProperty;Q=s.Region.prototype.show,K=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Z(e,t),e.prototype.show=function(t,e){var r,n,o,i,s;if(e=e||{},!0===e.preventDestroy,i=e.transitionOut,delete e.transitionOut,r=[t,e],!1===i)return Q.apply(this,r);if(n=this.currentView,o=function(t){return function(){return Q.apply(t,r)}}(this),null!=n&&y._.isFunction(n.transitionOut)){if(n.triggerMethod("before:transition:out"),s=n.transitionOut(),null!=(null!=s?s.then:void 0))return s.then(function(t){return function(){return o()}}());throw"transitionOut method most return a promise"}return o()},e}(s.Region);var et,rt=K,nt=function(t,e){function r(){this.constructor=t}for(var n in e)ot.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},ot={}.hasOwnProperty,it=[].slice;et=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return nt(e,t),e.prototype.templateHelpers={pathFor:function(){var t,e;return t=1<=arguments.length?it.call(arguments,0):[],(e=y.utils).pathFor.apply(e,t)},_:y._,s:y.s,t:function(){var t,e;return t=1<=arguments.length?it.call(arguments,0):[],(e=y.I18n).t.apply(e,t)},Mnt:y,formatCurrency:function(t,e){return null==e&&(e="$0,0.00"),y.numeral(t).format(e)},formatNumber:function(t,e){return null==e&&(e="0,0.00"),y.numeral(t).format(e)},formatPercentage:function(t,e){return null==e&&(e="0.00%"),y.numeral(t).format(e)},formatDate:function(t,e){return null==e&&(e="DD-MM-YYYY"),y.moment(t).format(e)}},e}(y.Object);var st,ut=et,pt=function(t,e){function r(){this.constructor=t}for(var n in e)lt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},lt={}.hasOwnProperty;st=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return pt(e,t),e}(s.View);var ct,at=st,ft=function(t,e){function r(){this.constructor=t}for(var n in e)ht.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},ht={}.hasOwnProperty;ct=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ft(e,t),e}(s.CollectionView);var yt,_t=ct,dt=function(t,e){function r(){this.constructor=t}for(var n in e)gt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},gt={}.hasOwnProperty;yt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return dt(e,t),e}(n.Model);var wt,bt=yt,mt=function(t,e){function r(){this.constructor=t}for(var n in e)vt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},vt={}.hasOwnProperty;wt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mt(e,t),e}(n.Collection);var At,Ot=wt,Ft=function(t,e){function r(){this.constructor=t}for(var n in e)kt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},kt={}.hasOwnProperty,Mt=[].slice;At=function(t){function e(t){null==t&&(t={}),e.__super__.constructor.call(this,t),this._instance_id=y._.uniqueId("responder"),this.register(this,this._instance_id)}return Ft(e,t),e.prototype.loaderView=at.extend({template:function(t){return y.config.templates.render("marionettist/loader",t,{defaultTemplate:"<div class='mri-loader'>\n  <div class='mri-loader__content'>\n    <i class=\"fa fa-spinner fa-spin fa-2x fa-fw\"></i>\n    <span class=\"sr-only\">Loading...</span>\n  </div>\n</div>"})}}),e.prototype.getLoaderView=function(){return null==this.get("loaderView")&&this.set({loaderView:new this.loaderView}),this.get("loaderView")},e.prototype.close=function(){var t;return t=1<=arguments.length?Mt.call(arguments,0):[],e.__super__.close.call(this,t),this.unregister(this,this._instance_id)},e.prototype.show=function(t,e){var r,n,o;return null==e&&(e={}),r={},y._.isObject(e)&&y._.isObject(e.fetch)&&(r=e.fetch),o=null!=e.region?e.region:this.get("region"),this.listenTo(t,"close",this.close),null!=e.async?(!1!==e.loaderView&&(n=this.getLoaderView(),this.listenTo(n,"close",this.close),o.show(n)),this.fetch(r).then(function(r){return function(){return!1!==e.loaderView&&o.currentView!==n?t.close():o.show(t)}}(),function(){})):o.show(t)},e.prototype.defaults={params:{},async:[]},e.prototype.waitFor=function(){var t,e;return t=1<=arguments.length?Mt.call(arguments,0):[],(e=y.utils).waitFor.apply(e,t)},e.prototype.deferred=function(){return y.$.Deferred()},e.prototype.fetch=function(t){var e,r;return null==t&&(t={}),r=this.deferred(),e=y._.chain([this.get("async")]).flatten().compact().value(),this.waitFor(e,{success:function(){return y._.isFunction(t.success)&&t.success(),r.resolve()},error:function(){return y._.isFunction(t.error)&&t.error(),r.reject()}}),r.promise()},e.prototype.save=function(){return this.deferred().promise()},e.prototype.destroy=function(){return this.deferred().promise()},e.prototype.register=function(t,e){return null==this._registry&&(this._registry={}),this._registry[e]=t},e.prototype.unregister=function(t,e){return delete this._registry[e]},e.prototype.resetRegistry=function(){var t,e,r,n,o;r=this.getRegistrySize(),n=this._registry;for(t in n)o=n[t],o.region.close();return e="There were "+r+" responders in the registry, there are now "+this.getRegistrySize(),this.getRegistrySize()>0?console.warn(e,this._registry):console.log(e)},e.prototype.getRegistrySize=function(){return y._.size(this._registry)},e}(bt);var Rt,Ct=At,jt=function(t,e){function r(){this.constructor=t}for(var n in e)Pt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},Pt={}.hasOwnProperty;Rt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return jt(e,t),e.prototype.responders=function(){return{base:Ct}},e.prototype.models=function(){return{base:bt}},e.prototype.collections=function(){return{base:Ot}},e.prototype.views=function(){return{}},e.prototype.getResponder=function(t,e){return null==e&&(e={}),this.getResource("responders",t,e)},e.prototype.getView=function(t,e){return null==e&&(e={}),this.getResource("views",t,e)},e.prototype.getModel=function(t,e){return null==e&&(e={}),this.getResource("models",t,e)},e.prototype.getCollection=function(t,e,r){return null==e&&(e=[]),null==r&&(r={}),this.getResource("collections",t,r,e)},e.prototype.getResource=function(t,e,r,n){var o,i;return null==r&&(r={}),o=null,i=this[t],y._.isFunction(i)&&(i=i()),null==r.viewModel&&(r.viewModel=this),y._.isObject(i)&&null!=i[e]&&(o=null!=n?new i[e](n,r):new i[e](r)),o},e}(n.Model);var Bt,xt=Rt,Vt=function(t,e){function r(){this.constructor=t}for(var n in e)qt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},qt={}.hasOwnProperty;Bt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vt(e,t),e.prototype.navigateTo=function(t,e){return null==e&&(e={}),y.location.navigateTo(t,e)},e.prototype.getCurrentRoute=function(){return y.location.getCurrentRoute()},e}(y.Object);var Tt,Et=Bt,Lt=function(t,e){function r(){this.constructor=t}for(var n in e)Dt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},Dt={}.hasOwnProperty;Tt=function(t){function e(t){this.resources=[],e.__super__.constructor.call(this,t),this._initChildApps(t),this.triggerMethod("init:child:apps"),y._.result(this,"startAfterInitialized")&&this.start(t)}return Lt(e,t),e.prototype.Controllers=new y.Object,e.prototype.Entities=new y.Object,e.prototype.Views=new y.Object,e.prototype._isRunning=!1,e.prototype._isDestroyed=!1,e.prototype.preventDestroy=!1,e.prototype.startAfterInitialized=!1,e.prototype.startWithParent=!1,e.prototype.stopWithParent=!0,e.prototype.startHistory=function(t){if(null==t&&(t={}),!y.Backbone.History.started)return y.location.startHistory(t)},e.prototype.start=function(t){return this.triggerMethod("before:resources:fetch",t),null==this.resources&&(this.resources=[]),y.utils.waitFor(this.resources,{success:function(r){return function(){return e.__super__.start.call(r,t),r.triggerMethod("resources:fetch:success"),r.triggerMethod("ready")}}(this),error:function(t){return function(){return t.triggerMethod("resources:fetch:error")}}(this)})},e.prototype.isRunning=function(){return this._isRunning},e.prototype.stop=function(t){return this._isRunning?(this.triggerMethod("before:stop",t),this._isRunning=!1,this.triggerMethod("stop",t),this):this},e.prototype._initChildApps=function(){var t,e;e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],this._childApps={},this.mergeOptions(e,["childApps","childAppOptions"]),t=this.childApps,t&&(y._.isFunction(t)&&(t=t.call(this,e)),this.addChildApps(t)),this._initListeners()},e.prototype._initListeners=function(){this.on({start:this._startChildApps,"before:stop":this._stopChildApps,"before:destroy":this._destroyChildApps})},e.prototype._startChildApps=function(t){return y._.each(this._childApps,function(e){if(!0===y.utils.getValue(e.getOption("startWithParent")))return e.start(t)})},e.prototype._stopChildApps=function(t){return y._.each(this._childApps,function(e){if(y._.result(e,"stopWithParent"))return e.stop(t)})},e.prototype._destroyChildApps=function(t){return y._.each(this._childApps,function(e){if(!y._.result(e,"preventDestroy"))return e.destroy(t)})},e.prototype._buildAppFromObject=function(t){var e,r;return e=t.AppClass,r=y._.omit(t,"AppClass"),this.buildApp(e,r)},e.prototype._buildApp=function(t,e){return y._.isFunction(t)?this.buildApp(t,e):y._.isObject(t)?this._buildAppFromObject(t):void 0},e.prototype.buildApp=function(t,e){return e=y._.extend({},this.childAppOptions,e),new t(e)},e.prototype._ensureAppIsUnique=function(t){if(this._childApps[t])throw new Marionette.Error({name:"DuplicateChildAppError",message:'A child App with name "'+t+'" has already been added.'})},e.prototype.addChildApps=function(t){return y._.each(t,function(t,e){this.addChildApp(e,t)},this)},e.prototype.addChildApp=function(t,e,r){var n;if(this._ensureAppIsUnique(t),!(n=this._buildApp(e,r)))throw new Marionette.Error({name:"AddChildAppError",message:"App build failed.  Incorrect configuration."});return n._name=t,this._childApps[t]=n,n.on("destroy",y._.partial(this._removeChildApp,t),this),this.isRunning()&&y._.result(n,"startWithParent")&&n.start(),n},e.prototype.getName=function(){return this._name},e.prototype.getChildApps=function(){return y._.clone(this._childApps)},e.prototype.getChildApp=function(t){return this._childApps[t]},e.prototype._removeChildApp=function(t){delete this._childApps[t]._name,delete this._childApps[t]},e.prototype.removeChildApps=function(){var t;return t=this.getChildApps(),y._.each(this._childApps,function(t,e){this.removeChildApp(e)},this),t},e.prototype.removeChildApp=function(t,e){var r;if(e=y._.extend({},e),r=this.getChildApp(t))return e.preventDestroy||y._.result(r,"preventDestroy")?this._removeChildApp(t):r.destroy(),r},e.prototype.destroy=function(){},e}(y.Application);var It,zt=Tt;It=y.Object.extend(y.Backbone.Radio.Requests);var Ht=It,St=function(t,e){function r(){this.constructor=t}for(var n in e)Wt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},Wt={}.hasOwnProperty;return"object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,y.channels=new A,y.location=new M,y.Module=Ht,y.Mixins={Collections:{},Models:{},Views:{}},y.env=new w,y.config=new x,y.logger=new W,y._.extend(y.Renderer,q),y.utils=new I,y.AppRoute=G,y.AppRouter=X,y._.extend(y.Region.prototype,rt.prototype),y.Views=new ut,y._.extend(y.View.prototype,{templateContext:function(){return y._.clone(y.Views.templateHelpers)}}),y.Views.Base=at,y.Views.Collection=_t,y.Entities=new y.Object,y.Entities.Models=new y.Object,y.Entities.Collections=new y.Object,y.Entities.ViewModels=new y.Object,y.Entities.Responders=new y.Object,y.Entities.Models.Base=bt,y.Backbone.AssociatedModel&&(y.Entities.Models.Associated=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return St(e,t),e}(y.Backbone.AssociatedModel)),y.Entities.Collections.Base=Ot,y.Entities.Responders.Base=Ct,y.Entities.ViewModels.Base=xt,y.Controllers=new y.Object,y.Controllers.Base=Et,y.Application=zt,"undefined"!=typeof global&&null!==global&&(global.Marionettist=y),y});