!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("underscore"),require("underscore.string"),require("jquery"),require("backbone"),require("backbone.radio"),require("backbone-associations"),require("backbone.marionette"),require("marionette.toolkit"),require("i18next"),require("numeral"),require("moment"),require("moment-range"),require("moment-timezone")):"function"==typeof define&&define.amd?define(["underscore","underscore.string","jquery","backbone","backbone.radio","backbone-associations","backbone.marionette","marionette.toolkit","i18next","numeral","moment","moment-range","moment-timezone"],e):t.Marionettist=e(t._,t.s,t.$,t.Backbone,t.Backbone.Radio,t.Backbone,t.Marionette,t.Marionette.Toolkit,t.i18next,t.numeral,t.moment,t.moment,t.moment)}(this,function(t,e,r,o,n,i,u,s,l,a,p,c,f){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e,r=r&&r.hasOwnProperty("default")?r.default:r,o=o&&o.hasOwnProperty("default")?o.default:o,n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i,u=u&&u.hasOwnProperty("default")?u.default:u,s=s&&s.hasOwnProperty("default")?s.default:s,l=l&&l.hasOwnProperty("default")?l.default:l,a=a&&a.hasOwnProperty("default")?a.default:a,p=p&&p.hasOwnProperty("default")?p.default:p,c=c&&c.hasOwnProperty("default")?c.default:c,f=f&&f.hasOwnProperty("default")?f.default:f;var y;y=u.extend(),y.Backbone=o,y.Backbone.Radio=n,y.Marionette=u,y._=t,y.$=r,y.s=e,y.I18n=l,y.numeral=a,y.moment=p;var h,_=y,d=function(t,e){function r(){this.constructor=t}for(var o in e)g.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;h=function(t){function e(){this.stage="development"}return d(e,t),e.prototype.isDevelopment=function(){return"development"===this.stage},e.prototype.isProduction=function(){return"production"===this.stage},e.prototype.getLocale=function(){return _.I18n.language},e.prototype.setStage=function(t){var e;return e=this.stage,this.stage=t,this.triggerMethod("change:stage",e,t)},e.prototype.getStage=function(){return this.stage},e.prototype.setLocale=function(t,e){var r;return null==t&&(t="en"),null==e&&(e=null),r=this.getLocale(),_.I18n.changeLanguage(t,function(o){if(_.channels.publish("marionettist","change:locale",{currentLocale:t,oldLocale:r}),_._.isFunction(e))return e(o)})},e}(_.Object);var w,m=h,b=function(t,e){function r(){this.constructor=t}for(var o in e)v.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},v={}.hasOwnProperty;w=function(t){function e(){}return b(e,t),e.prototype.request=function(t,e,r){return null==t&&(t="global"),null==e&&(e=""),null==r&&(r={}),_.Backbone.Radio.channel(t).request(e,r)},e.prototype.replyOnce=function(t,e,r){var o;return null==t&&(t="global"),null==e&&(e=""),o=_.Backbone.Radio.channel(t),_._.isFunction(r)?o.replyOnce(e,r):o.replyOnce(r)},e.prototype.reply=function(t,e,r){var o;return null==t&&(t="global"),null==e&&(e=""),o=_.Backbone.Radio.channel(t),_._.isFunction(r)?o.reply(e,r):o.reply(r)},e.prototype.publish=function(t,e,r){return null==t&&(t="global"),null==e&&(e=""),null==r&&(r={}),_.Backbone.Radio.channel(t).trigger(e,r)},e.prototype.subscribe=function(t,e,r){return null==t&&(t="global"),null==e&&(e=""),_.Backbone.Radio.channel(t).on(e,r)},e}(_.Object);var O,P=w,R=function(t,e){function r(){this.constructor=t}for(var o in e)k.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},k={}.hasOwnProperty;O=function(t){function e(){}return R(e,t),e.prototype.refreshRoute=function(t){return null==t&&(t=this.getCurrentRoute()),_.Backbone.history.loadUrl(t)},e.prototype.navigateTo=function(t,e){return null==e&&(e={}),_.Backbone.history.navigate(t,e)},e.prototype.getCurrentRoute=function(){var t;return t=_.Backbone.history.fragment,_._.isEmpty(t)?null:t},e.prototype.startHistory=function(t){if(null==t&&(t={}),null!=_.Backbone.history)return _.Backbone.history.start(t)},e}(_.Object);var F,M=O;F=function(){function t(){}return t.prototype.debug=!1,t.prototype.lookupPaths=[],t.prototype.engine=function(){var t;return t={},"undefined"!=typeof HAML&&null!==HAML&&(t=HAML),"undefined"!=typeof JST&&null!==JST&&(t=JST),t},t.prototype.render=function(t,e,r){var o,n;return null==t&&(t=""),null==e&&(e={}),null==r&&(r={}),n="",o=this.engine,_._.isFunction(t)&&(o=o()),null!=r.defaultTemplate&&(n=r.defaultTemplate),null!=o&&_._.isFunction(o[t])&&(n=o[t](e)),n},t}();var j,T=F,B=function(t,e){function r(){this.constructor=t}for(var o in e)x.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},x={}.hasOwnProperty;j=function(t){function e(){this.templates=new T}return B(e,t),e}(_.Object);var V,A=j;V={render:function(t,e){var r;if(Marionettist._.isFunction(t))return t(e);if(!1!==t){if(r=this.getTemplate(t),!Marionettist._.isFunction(r))throw"Template "+t+" was not found!";return r(e)}},getTemplate:function(t){var e,r,o,n,i,u,s,l,a;if(s=Marionettist.config.templates.lookupPaths,Marionettist._.isFunction(s)&&(s=s()),!Marionettist._.isArray(s))throw"lookupPaths most be an array";for(a=[t],0===s.length&&(s=[""]),e=0,o=s.length;e<o;e++)for(i=s[e],r=0,n=a.length;r<n;r++)if(l=a[r],null!=(u=this.findLookupPath(i+l,t)))return u},findLookupPath:function(t,e){var r,o;if(r=Marionettist.config.templates.engine,Marionettist._.isFunction(r)&&(r=r()),o=r[t],!0===Marionettist.config.templates.debug&&Marionettist.logger.info("Looking template: "+e+" in '"+t+"'"),o)return o},withTemplate:function(t){var e;if(null!=t)return e=t.split("/"),e.splice(-1,0,"templates"),e.join("/")}};var q,E=V,D=function(t,e){function r(){this.constructor=t}for(var o in e)C.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},C={}.hasOwnProperty,L=[].slice;q=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.getValue=function(t,e,r){return _._.isFunction(t)&&(t=r?t.apply(e,r):t.call(e)),t},e.prototype.pathFor=function(t){return"","#"+t},e.prototype.waitFor=function(t,e){switch(null==e&&(e={}),!1){case"bluebird"!==e.promiseType:return this._waitForBluebird(t,e);default:return this._waitForAjax(t,e)}},e.prototype._waitForAjax=function(t,e){var r,o;return null==t&&(t=[]),null==e&&(e={}),o=[],o=_._.chain([t]).flatten().value(),o.length>0?(r=_.$).when.apply(r,o).then(function(){var t;if(t=1<=arguments.length?L.call(arguments,0):[],_._.isFunction(e.success))return e.success.apply(e,t)},function(){var t;if(t=1<=arguments.length?L.call(arguments,0):[],_._.isFunction(e.error))return e.error.apply(e,t)}):_._.isFunction(e.success)?e.success(null):void 0},e.prototype._waitForBluebird=function(t,e){return null==e&&(e={}),t=_._.chain([t]).flatten().value(),t.length>0?Promise.all(t.map(function(t){return t.reflect()})).then(function(t){var r,o,n,i,u;for(u=[],r=[],o=0,i=t.length;o<i;o++)n=t[o],n.isFulfilled()?u.push(n.value()):r.push(n.reason());if(r.length>0){if(_._.isFunction(e.error))return e.error.apply(e,r)}else if(_._.isFunction(e.success))return e.success.apply(e,u)}):_._.isFunction(e.success)?e.success(null):void 0},e}(_.Object);var K,S=q,N=function(t,e){function r(){this.constructor=t}for(var o in e)H.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},H={}.hasOwnProperty;K=function(t){function e(){}return N(e,t),e.prototype.success=function(t,e){return null==e&&(e={}),e.type="success",this.log(t,e)},e.prototype.warn=function(t,e){return null==e&&(e={}),e.type="warn",this.log(t,e)},e.prototype.error=function(t,e){return null==e&&(e={}),e.type="error",this.log(t,e)},e.prototype.info=function(t,e){return null==e&&(e={}),e.type="info",this.log(t,e)},e.prototype.log=function(t,e){var r,o,n;if(null==e&&(e={}),o=e.force,n=e.type,_.env.isDevelopment()||!0===o){switch(n=n||"black",r="White",n){case"success":n="Green",r="LimeGreen";break;case"info":n="DodgerBlue",r="Turquoise";break;case"error":n="Red",r="Black";break;case"start":n="OliveDrab",r="PaleGreen";break;case"warning":n="Tomato",r="Black";break;case"end":n="Orchid",r="MediumVioletRed";break;default:n=n}r="White","object"==typeof t?console.log(t):console.log("%c"+t,"type:"+n+";font-weight:bold; background-type: "+r+";")}},e}(_.Object);var z,J=K,I=function(t,e){function r(){this.constructor=t}for(var o in e)$.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},$={}.hasOwnProperty;z=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return I(e,t),e.prototype.router=function(){return this.getOption("router")},e.prototype.path=function(){return this.getOption("path")},e.prototype.actionName=function(){return this.getOption("actionName")},e.prototype.controller=function(){return this.getOption("controller")},e}(_.Object);var W,Y=z,G=function(t,e){function r(){this.constructor=t}for(var o in e)U.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},U={}.hasOwnProperty;W=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return G(e,t),e.prototype.onRoute=function(t,e,r){if(null!=this.controller&&_._.isFunction(this.controller.onRoute))return this.controller.onRoute(this,t,e,r)},e.prototype._setControllerFilters=function(t){var e,r;return null!=t&&(e={before:{},after:{}},r=t.filters,_._.isFunction(r)&&(r=r()),null==t.filters&&(t.filters={}),t.filters=_._.extend(e,r)),t},e.prototype._addAppRoute=function(t,e,r){var o;if(this.controller=this._setControllerFilters(t),t[r],!(o=function(t){return function(o){if(t.controller.route=new _.AppRoute({controller:t.controller,actionName:r,path:e}),!1!==t._executeFilter(t.controller.filters.before,t.controller))return t.controller[r].apply(t.controller,t._getParams()),t._executeFilter(t.controller.filters.after,t.controller)}}(this)))throw new _.Marionette.Error('Method "'+r+'" was not found on the controller');return this.route(e,r,_._.bind(o,t))},e.prototype._executeFilter=function(t,e){var r,o,n,i,u,s,l;for(s=!0,u=_._.keys(t),o=0,n=u.length;o<n;o++)switch(i=u[o],r=t[i],l="Action halted by filter '"+i+"'",!1){case!_._.isFunction(r):if(!1===(s=r(e))){"undefined"!=typeof console&&null!==console&&console.warn(l);break}break;case!_._.isObject(r):if(!1===(s=this._proccessFilterObject(i,r,e))){"undefined"!=typeof console&&null!==console&&console.warn(l);break}}return s},e.prototype._getParams=function(){var t;return t=this._routeToRegExp(this.controller.route.getOption("path")),this._extractParameters(t,_.Backbone.history.getFragment())},e.prototype._proccessFilterObject=function(t,e,r){var o,n,i,u;if(i={method:null,only:[],except:[]},u=_._.extend(i,e),n=r[t],o=r.route.actionName(),!_._.isArray(u.only))throw"filter option only, most be an array";if(!_._.isArray(u.except))throw"filter option except, most be an array";if(u.only.length>0||u.except.length>0){if(_._.contains(u.only,o)&&!_._.contains(u.except,o)&&_._.isFunction(n))return n.apply(this.controller,this._getParams())}else if(_._.isFunction(n))return n.apply(this.controller,this._getParams())},e}(_.AppRouter);var Q,X,Z=W,tt=function(t,e){function r(){this.constructor=t}for(var o in e)et.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},et={}.hasOwnProperty;X=u.Region.prototype.show,Q=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tt(e,t),e.prototype.show=function(t,e){var r,o,n,i,u;if(e=e||{},!0===e.preventDestroy,i=e.transitionOut,delete e.transitionOut,r=[t,e],!1===i)return X.apply(this,r);if(o=this.currentView,n=function(t){return function(){return X.apply(t,r)}}(this),null!=o&&_._.isFunction(o.transitionOut)){if(o.triggerMethod("before:transition:out"),u=o.transitionOut(),null!=(null!=u?u.then:void 0))return u.then(function(t){return function(){return n()}}());throw"transitionOut method most return a promise"}return n()},e}(u.Region);var rt,ot=Q,nt=function(t,e){function r(){this.constructor=t}for(var o in e)it.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},it={}.hasOwnProperty,ut=[].slice;rt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return nt(e,t),e.prototype.templateHelpers={pathFor:function(){var t,e;return t=1<=arguments.length?ut.call(arguments,0):[],(e=_.utils).pathFor.apply(e,t)},_:_._,s:_.s,t:function(){var t,e;return t=1<=arguments.length?ut.call(arguments,0):[],(e=_.I18n).t.apply(e,t)},Mnt:_,formatCurrency:function(t,e){return null==e&&(e="$0,0.00"),_.numeral(t).format(e)},formatNumber:function(t,e){return null==e&&(e="0,0.00"),_.numeral(t).format(e)},formatPercentage:function(t,e){return null==e&&(e="0.00%"),_.numeral(t).format(e)},formatDate:function(t,e){return null==e&&(e="DD-MM-YYYY"),_.moment(t).format(e)}},e}(_.Object);var st,lt=rt,at=function(t,e){function r(){this.constructor=t}for(var o in e)pt.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},pt={}.hasOwnProperty;st=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return at(e,t),e}(u.View);var ct,ft=st,yt=function(t,e){function r(){this.constructor=t}for(var o in e)ht.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},ht={}.hasOwnProperty;ct=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yt(e,t),e}(u.CollectionView);var _t,dt=ct,gt=function(t,e){function r(){this.constructor=t}for(var o in e)wt.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},wt={}.hasOwnProperty;_t=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return gt(e,t),e.prototype.urlRoot="",e.prototype.urlPath="",e.prototype.headers=function(){return{}},e.prototype.url=function(){return this.isNew()?this.urlRoot+"/"+this.urlPath:this.urlRoot+"/"+this.urlPath+"/"+this.get("id")},e.prototype.remoteKey="data",e.prototype._setAttr=function(t,r){return null!=r&&(r.parse=!1),e.__super__._setAttr.call(this,t,r)},e.prototype.sync=function(t,r,o){var n,i;return null==o.contentType&&(o.contentType="application/json"),null==o.headers&&(o.headers=_.utils.getValue(this.headers)),o.dataType="json",null!=o.data&&o.data instanceof FormData&&(o.method="POST",o.contentType=!1,o.processData=!1,i="POST","update"===t&&(i="PUT"),"delete"===t&&(i="DELETE"),o.data.append("_method",i)),"create"!==t&&"update"!==t&&"delete"!==t||null!=o.attrs||(null!=this.remoteKey?(n={},n[this.remoteKey]=this.toJSON()):n=this.toJSON(),null!=o.data&&o.data instanceof FormData&&(n=o.data),o.attrs=n),e.__super__.sync.call(this,t,r,o)},e.prototype.parse=function(t,e){var r;return r=t,(null!=this.remoteKey&&!this.collection||null!=this.remoteKey&&null!=e.forceRemoteKey)&&(r=r[this.remoteKey]),r},e}(o.Model);var mt,bt=_t,vt=function(t,e){function r(){this.constructor=t}for(var o in e)Ot.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},Ot={}.hasOwnProperty;mt=void 0,_.Backbone.AssociatedModel&&(mt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vt(e,t),e.prototype.urlRoot="",e.prototype.urlPath="",e.prototype.headers=function(){return{}},e.prototype.url=function(){return this.isNew()?this.urlRoot+"/"+this.urlPath:this.urlRoot+"/"+this.urlPath+"/"+this.get("id")},e.prototype.remoteKey="data",e.prototype._setAttr=function(t,r){return null!=r&&(r.parse=!1),e.__super__._setAttr.call(this,t,r)},e.prototype.sync=function(t,r,o){var n,i;return null==o.contentType&&(o.contentType="application/json"),null==o.headers&&(o.headers=_.utils.getValue(this.headers)),o.dataType="json",null!=o.data&&o.data instanceof FormData&&(o.method="POST",o.contentType=!1,o.processData=!1,i="POST","update"===t&&(i="PUT"),"delete"===t&&(i="DELETE"),o.data.append("_method",i)),"create"!==t&&"update"!==t&&"delete"!==t||null!=o.attrs||(null!=this.remoteKey?(n={},n[this.remoteKey]=this.toJSON()):n=this.toJSON(),null!=o.data&&o.data instanceof FormData&&(n=o.data),o.attrs=n),e.__super__.sync.call(this,t,r,o)},e.prototype.parse=function(t,e){var r;return r=t,(null!=this.remoteKey&&!this.collection||null!=this.remoteKey&&null!=e.forceRemoteKey)&&(r=r[this.remoteKey]),r},e}(_.Backbone.AssociatedModel));var Pt,Rt=mt,kt=function(t,e){function r(){this.constructor=t}for(var o in e)Ft.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},Ft={}.hasOwnProperty;Pt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return kt(e,t),e.prototype.remoteKey="data",e.prototype.urlRoot="",e.prototype.headers=function(){return{}},e.prototype.url=function(){return this.urlRoot+"/"+this.urlPath},e.prototype.sync=function(t,r,o){return null==o.contentType&&(o.contentType="application/json"),null==o.headers&&(o.headers=_.utils.getValue(this.headers)),e.__super__.sync.call(this,t,r,o)},e.prototype.parse=function(t,e){var r;return r=t,null!=this.remoteKey&&(r=r[this.remoteKey]),null!=t.meta&&(this.meta=t.meta),r},e}(o.Collection);var Mt,jt=Pt,Tt=function(t,e){function r(){this.constructor=t}for(var o in e)Bt.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},Bt={}.hasOwnProperty,xt=[].slice;Mt=function(t){function e(t){null==t&&(t={}),e.__super__.constructor.call(this,t),this._instance_id=_._.uniqueId("responder"),this.register(this,this._instance_id)}return Tt(e,t),e.prototype.loaderView=ft.extend({template:function(t){return _.config.templates.render("marionettist/loader",t,{defaultTemplate:"<div class='mri-loader'>\n  <div class='mri-loader__content'>\n    <i class=\"fa fa-spinner fa-spin fa-2x fa-fw\"></i>\n    <span class=\"sr-only\">Loading...</span>\n  </div>\n</div>"})}}),e.prototype.getLoaderView=function(){return null==this.get("loaderView")&&this.set({loaderView:new this.loaderView}),this.get("loaderView")},e.prototype.close=function(){var t;return t=1<=arguments.length?xt.call(arguments,0):[],e.__super__.close.call(this,t),this.unregister(this,this._instance_id)},e.prototype.show=function(t,e){var r,o,n;return null==e&&(e={}),r={},_._.isObject(e)&&_._.isObject(e.fetch)&&(r=e.fetch),n=null!=e.region?e.region:this.get("region"),this.listenTo(t,"close",this.close),null!=e.async?(!1!==e.loaderView&&(o=this.getLoaderView(),this.listenTo(o,"close",this.close),n.show(o)),this.fetch(r).then(function(r){return function(){return!1!==e.loaderView&&n.currentView!==o?t.close():n.show(t)}}(),function(){})):n.show(t)},e.prototype.defaults={params:{},async:[]},e.prototype.waitFor=function(){var t,e;return t=1<=arguments.length?xt.call(arguments,0):[],(e=_.utils).waitFor.apply(e,t)},e.prototype.deferred=function(){return _.$.Deferred()},e.prototype.fetch=function(t){var e,r;return null==t&&(t={}),r=this.deferred(),e=_._.chain([this.get("async")]).flatten().compact().value(),this.waitFor(e,{success:function(){return _._.isFunction(t.success)&&t.success(),r.resolve()},error:function(){return _._.isFunction(t.error)&&t.error(),r.reject()}}),r.promise()},e.prototype.save=function(){return this.deferred().promise()},e.prototype.destroy=function(){return this.deferred().promise()},e.prototype.register=function(t,e){return null==this._registry&&(this._registry={}),this._registry[e]=t},e.prototype.unregister=function(t,e){return delete this._registry[e]},e.prototype.resetRegistry=function(){var t,e,r,o,n;r=this.getRegistrySize(),o=this._registry;for(t in o)n=o[t],n.region.close();return e="There were "+r+" responders in the registry, there are now "+this.getRegistrySize(),this.getRegistrySize()>0?console.warn(e,this._registry):console.log(e)},e.prototype.getRegistrySize=function(){return _._.size(this._registry)},e}(bt);var Vt,At=Mt,qt=function(t,e){function r(){this.constructor=t}for(var o in e)Et.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},Et={}.hasOwnProperty;Vt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return qt(e,t),e.prototype.responders=function(){return{base:At}},e.prototype.models=function(){return{base:bt}},e.prototype.collections=function(){return{base:jt}},e.prototype.views=function(){return{}},e.prototype.getResponder=function(t,e){return null==e&&(e={}),this.getResource("responders",t,e)},e.prototype.getView=function(t,e){return null==e&&(e={}),this.getResource("views",t,e)},e.prototype.getModel=function(t,e){return null==e&&(e={}),this.getResource("models",t,e)},e.prototype.getCollection=function(t,e,r){return null==e&&(e=[]),null==r&&(r={}),this.getResource("collections",t,r,e)},e.prototype.getResource=function(t,e,r,o){var n,i;return null==r&&(r={}),n=null,i=this[t],_._.isFunction(i)&&(i=i()),null==r.viewModel&&(r.viewModel=this),_._.isObject(i)&&null!=i[e]&&(n=null!=o?new i[e](o,r):new i[e](r)),n},e}(o.Model);var Dt,Ct=Vt,Lt=function(t,e){function r(){this.constructor=t}for(var o in e)Kt.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},Kt={}.hasOwnProperty;Dt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lt(e,t),e.prototype.navigateTo=function(t,e){return null==e&&(e={}),_.location.navigateTo(t,e)},e.prototype.getCurrentRoute=function(){return _.location.getCurrentRoute()},e}(_.Object);var St,Nt=Dt,Ht=function(t,e){function r(){this.constructor=t}for(var o in e)zt.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},zt={}.hasOwnProperty;St=function(t){function e(t){this.resources=[],e.__super__.constructor.call(this,t)}return Ht(e,t),e.prototype.Controllers=new _.Object,e.prototype.Entities=new _.Object,e.prototype.Views=new _.Object,e.prototype._isRunning=!1,e.prototype._isDestroyed=!1,e.prototype.preventDestroy=!1,e.prototype.startAfterInitialized=!1,e.prototype.startWithParent=!1,e.prototype.stopWithParent=!0,e.prototype.startHistory=function(t){if(null==t&&(t={}),!_.Backbone.History.started)return _.location.startHistory(t)},e.prototype.start=function(t){return this.triggerMethod("before:resources:fetch",t),null==this.resources&&(this.resources=[]),_.utils.waitFor(this.resources,{success:function(r){return function(){return e.__super__.start.call(r,t),r.triggerMethod("resources:fetch:success"),r.triggerMethod("ready")}}(this),error:function(t){return function(){return t.triggerMethod("resources:fetch:error")}}(this)})},e}(_.Marionette.Toolkit.App);var Jt,It=St;Jt=_.Object.extend(_.Backbone.Radio.Requests);var $t=Jt;return"object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,_.channels=new P,_.location=new M,_.Module=$t,_.Mixins={Collections:{},Models:{},Views:{}},_.env=new m,_.config=new A,_.logger=new J,_._.extend(_.Renderer,E),_.utils=new S,_.AppRoute=Y,_.AppRouter=Z,_._.extend(_.Region.prototype,ot.prototype),_.Views=new lt,_._.extend(_.View.prototype,{templateContext:function(){return _._.clone(_.Views.templateHelpers)}}),_.Views.Base=ft,_.Views.Collection=dt,_.Entities=new _.Object,_.Entities.Models=new _.Object,_.Entities.Collections=new _.Object,_.Entities.ViewModels=new _.Object,_.Entities.Responders=new _.Object,_.Entities.Models.Base=bt,_.Entities.Models.Associated=Rt,_.Entities.Collections.Base=jt,_.Entities.Responders.Base=At,_.Entities.ViewModels.Base=Ct,_.Controllers=new _.Object,_.Controllers.Base=Nt,_.Application=It,"undefined"!=typeof global&&null!==global&&(global.Marionettist=_),_});
//# sourceMappingURL=marionettist.min.js.map