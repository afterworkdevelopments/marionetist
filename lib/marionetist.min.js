var extend=function(e,t){function n(){this.constructor=e}for(var r in t)hasProp.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;!function(e,t){var n,r,i,o,s,u,l;if(e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,"function"==typeof define&&define.amd)return define(["underscore","jquery","backbone","backbone.marionette","i18next-client","exports","underscore.string"],function(n,r,i,o,s,u,l){var a;a=t(e,u,i,o,n,r,s,l),e.Marionetist=a});if("undefined"!=typeof exports){o=require("underscore"),n=void 0,r=require("backbone"),i=require("backbone.marionette"),u=require("i18next-client"),l=require("underscore.string");try{n=require("jquery")}catch(a){s=a}return module.exports=e.Marionetist=t(e,exports,r,i,o,n,u,l)}return e.Marionetist=t(e,{},e.Backbone,e.Marionette,e._,e.jQuery||e.Zepto||e.ender||e.$,e.i18n,e.s)}(this,function(e,t,n,r,i,o,s,u){var l,a;return l=r.extend(),l.Backbone=n,l.Marionette=r,l._=i,l.$=o,l.s=u,l.I18n=s,l.Config=new l.Object,a=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,t),n.prototype.lookupPaths=["templates/"],n.prototype.engine=function(){var t;return t={},null!=e.HAML&&(t=HAML),null!=e.JST&&(t=JST),t},n}(l.Object),l.Config.options.templates=new a,i.extend(l.Renderer,{lookups:l.Config.getOption("templates").getOption("lookupPaths"),render:function(e,t){var n;if(e!==!1){if(n=this.getTemplate(e),!n)throw"Template "+e+" not found!";return n(t)}},getTemplate:function(e){var t,n,r,o,s,u,a,c,p;for(c=this.lookups,n=0,o=c.length;o>n;n++)for(u=c[n],p=[e,this.withTemplate(e)],r=0,s=p.length;s>r;r++)if(a=p[r],t=l.Config.getOption("templates").getOption("engine"),i.isFunction(t)&&(t=t()),t[u+a])return t[u+a]},withTemplate:function(e){var t;return null!=e?(t=e.split("/"),t.splice(-1,0,"templates"),t.join("/")):void 0}}),l.Views=new l.Object,l.Views.templateHelpers={t:l.I18n.t},i.extend(r.View.prototype,{templateHelpers:function(){return l.Views.templateHelpers}}),l.Views.CollectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t}(r.CollectionView),l.Views.CompositeView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t}(r.CompositeView),l.Views.LayoutView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t}(r.LayoutView),l.Views.ItemView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t}(r.ItemView),l.Entities=new l.Object,l.Controllers=new l.Object,l.Controllers.Application=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,e),t}(l.Object),l.Application=l.Application.extend({Backbone:l.Backbone,Marionette:l.Marionette,_:l._,$:l.$,s:l.s,I18n:l.I18n,Controllers:l.Controllers,Entities:l.Entities,Views:l.Views,navigate:function(e,t){return null==t&&(t={}),l.Backbone.history.navigate(e,t)},getCurrentRoute:function(){var e;return e=l.Backbone.history.fragment,i.isEmpty(e)?null:e},startHistory:function(e){return null==e&&(e={}),null!=l.Backbone.history?l.Backbone.history.start(e):void 0},register:function(e,t){return null==this._registry&&(this._registry={}),this._registry[t]=e},unregister:function(e,t){return delete this._registry[t]},resetRegistry:function(){var e,t,n,r,i;r=this.getRegistrySize(),i=this._registry;for(t in i)e=i[t],e.region.close();return n="There were "+r+" controllers in the registry, there are now "+this.getRegistrySize(),this.getRegistrySize()>0?console.warn(n,this._registry):console.log(n)},getRegistrySize:function(){return i.size(this._registry)}}),l});